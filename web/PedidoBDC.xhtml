<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        
        <title>Pedidos Clientes</title>
    </h:head>
    <h:body>
        <h:form id="forprincipal">
 <p:growl showDetail="true" showSummary="true" />
 <p:panel id="basic" header="Pedidos Online"  >
            <p:menubar>
                <p:menuitem value="Nuevo" update="forprincipal" 
                            action="#{pedidoWEb.limpiarPedido()}"
                            icon="ui-icon-plus" />
               <p:menuitem value="Guardar" 
                           action="#{pedidoWEb.guardarPedido()}"
                            icon="ui-icon-disk" />
                <p:menuitem value="Monitor"
                            action="#{pedidoWEb.mostrarProducto()}"
                            
                            icon=" ui-icon-search" />
            </p:menubar>
                    <h:panelGrid columns="4" width="80%">
                        
                        <h:outputLabel  value="Cliente "  />
                        <p:inputText readonly="true" value="#{pedidoWEb.descripCliente}"    />
                     
                        
                              <h:outputLabel  value="Sucursal:  "  />
                        <p:selectOneMenu id="listSucursal"  value ="#{pedidoWEb.codsucursal}" >
                            <f:selectItems value="#{pedidoWEb.lstSucursal}"
                                           var="suc" itemLabel="#{suc.sucursal}" itemValue="#{suc.idsucursal}"/>                                       
                        </p:selectOneMenu> 
                        
                         <h:outputLabel  value="Fecha "  />
                         <p:inputText readonly="true"  value="#{pedidoWEb.fecha}">
                        <f:convertDateTime pattern="dd/MM/yyyy" />
                        </p:inputText>  
                     
                        <h:outputLabel  value="Estado "  />
                        <p:inputText  readonly="true" value="#{pedidoWEb.estado}" />   
                            
                         
                         
                    </h:panelGrid>
            <h:panelGrid columns="8" width="100%"  style="background: #C0BEBE">
                          <h:outputLabel  value="Cantidad "  />
                          <p:inputText  value="#{pedidoWEb.cantidadSolic}" />
                         <h:outputLabel  value="Producto "  />
                         <h:panelGroup >
                             <p:inputText value="#{pedidoWEb.descripcionProducto}" />
                             <p:commandButton   action="#{pedidoWEb.mostrarDialogProd()}"
                                           id="iconOnly" 
                                           icon="ui-icon-search" title="Icon Only" />
                         </h:panelGroup>
                         
                        <h:outputLabel  value="medida "  />
                        <p:inputText value="#{pedidoWEb.medida}" readonly="true"  />
                        <h:outputLabel  value="Agregar "  />
                           <p:commandButton  
                               id="iconOnlya" action="#{pedidoWEb.agreaLinea()}" update="forprincipal"
                                           icon="ui-icon-circle-arrow-e" title="Icon Only" />
                </h:panelGrid>
            <p:dataGrid var="car"  columns="3" layout="grid"
                        
                        rows="12" paginator="true" id="cars"
                        value="#{pedidoWEb.lstDetalle}"
                        emptyMessage="">

                <p:panel  style="text-align:center">
                    <h:panelGrid columns="1" id="iddet" style="width:100%">
                        <p:graphicImage /> 

                        <h:outputText value="#{car.idproducto.producto}"/>

                      
                        
                    </h:panelGrid>
                </p:panel>

            </p:dataGrid>
           <p:dialog header="Buscar producto" widgetVar="dialogoProducto"
                      width="50%"
                      >
                <h:panelGrid columns="1" width="100%">
                    <p:menubar>
                        <p:menuitem value="Limpiar" 
                                    icon="ui-icon-plus" />
                        <p:menuitem id="idBuscarPro" value="Buscar" update="tablaProdd"
                                    action="#{pedidoWEb.buscarProducto()}"
                                    icon=" ui-icon-search" > 
                        </p:menuitem>
                    </p:menubar>
                </h:panelGrid>
                <h:panelGrid >
                    <p:dataTable id="tablaProdd" 
                                 emptyMessage=""
                                 value="#{pedidoWEb.lstProducto}"
                                 var="dpro"    
                                 rowKey="#{dpro.idproducto}"
                                 selectionMode="single" rows="10"  >                        
                        <p:ajax event="rowSelect" listener="#{pedidoWEb.onRowSelect}"
                                update="forprincipal" process="@all"  
                           />
                        <p:column  headerText="Producto">
                            <h:outputText  value="#{ dpro.producto}" />
                        </p:column>
                         <p:column  headerText="Descripcion">
                            <h:outputText  value="#{ dpro.producto}" />
                        </p:column>
                    </p:dataTable>
                </h:panelGrid>
            </p:dialog>
     </p:panel>
        </h:form>
    </h:body>
</html>

